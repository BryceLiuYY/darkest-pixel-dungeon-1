
illusions:
    更高的自由度，
    扩展世界地图而不只是地牢
    加入法术
    添加额外的基础属性，而不只是血量
    强化生存元素，不只是饱食度
    rpg元素强化，这意味着ui框架需要修改

ideas:
    黑暗法典，精神传送
    古墓，需要cave generation
    圣坛，洗刷物品，露珠瓶扩容之后灌满太难了
    扎营，需要机制修改
    女巫专精占星师，需要额外属性
    远程武器改动，需要改动地图生成
    地形破坏，需要修改地图机制
    装备系统，misc改动

notes:
    sprite size: npc-12x14, hero-12x15
    hit check:
        roll点: attackSkill > defenseSkill
        Bless则乘以1.2，如果是魔法则乘以2
    伤害:
        effectiveDamage =   damageRoll()-drRoll()
        effectiveDamage =   attackProc(enemy, effectiveDamage)
        effectiveDamage =   enemy.defenseProc(this, effectiveDamage)

        enemy.damage(effectiveDamage, this)

        buff imbue
    
    地图:
        repeat build
            initRooms
            build path, assign entrance& exit
            assignRoomType
            paint   // paint rooms
            paintLuminary
            paintWater
            paintGrass
            placeTraps
        decorate
        buildFlagMaps
        createMobs
        createItems
    Item <- EquipableItem <- KindOfWeapon <- Weapon <- MissileWeapon

todos:
    炼金术士贴图
    学者任务
    caveslevel地图生成重做
    炼金术士瓶子检测
    感谢
    时光沙漏重做
    取消固定perk的做法，全新perk机制
    敌人的寻路
    属性弱点重做

known bugs:
    打败天狗有时候闪退

reporter:
    用爱发电qi某人
    泰勒
    西園寺の世界

--------------------------------------------------------------------------------
    +血量、伤害等数值变更为浮点型；
    +星盘改为充能制
    +特效、贴图，智能选择等
    +书籍
    +地图生成
    +提高难度

0.2.1
    +女巫改动：随着使用次数的提高，萃取瓶的附魔几率逐渐提升，露水的消耗下调1点；压力免疫几率下调为0.1；药水调整，现在魔女可以强化大多数伤害药剂；占星师专精完成；
        占星师：
        给予星盘来随机释放技能，神器，必须装备

        先知：你早已预知对方的招式，同时也见到了对方的死状。闪避该敌人的攻击
        涤罪：净化目标身上的一切不洁之物。依据敌方损失的生命给予纯粹伤害
        系命：暂时篡改命运。将受到的伤害全数转移到敌方身上
        强运：回复少许生命，抵挡星盘的下一次负面效果。
        赦免：回复敌方生命但给予脆弱。
        信仰：回复少许压力，下次充能时间降低。
        过载：造成大量魔法伤害，消耗少量生命值。
        引导：击退并给与伤害。
        预言：眩晕周围的敌人。

        天罚：窥探天机的代价。受到大量魔法伤害
        虚妄：居高自大的惩罚。虚弱+眩晕
        反馈：贪婪是你的心魔。压力上调
        禁锢：残废，延长下一次的充能时间。

    +占星师星盘带来的众多新buff的加入；
    +新的神像已加入到神像房，添加了相关新物品，亵渎拥有了正确的事件；
    +新敌人与必要的新物品；
    +现在升级将获得暴击几率的提升（盗贼具有额外的暴击率），新的戒指类型——暴击戒指；暴击压力回复下调；
    +新道具附魔台加入到炼金房；
    +影之灵龛现在是神器，需要装备才能使用

    ~boss单位对灵能震爆卷轴抗性提高
    ~豺狼人暴怒需要1回合
    ~自然压力增长下调，平衡击杀、升级等的压力回复
    ~睡眠不会因为血量而打断，最大睡眠时间下调
    ~火焰不会多次烧毁物品
    ~加强了骷髅骑士等少数几个怪物
    ~露水掉落提升，回复量下调
    ~工具栏改动，现在最多可以开启6个快捷栏
    ~提高了催眠卷轴的掉落

    -部分伤害类型修正

0.2.0
    +伤害类型，机制重做：
        类型：物理，魔法，精神，
            命中机制不变，精神与魔法相当
            魔法伤害和精神伤害无视护盾
            装甲对物理伤害和魔法伤害的抵抗未更改，精神伤害无视
        元素：火，毒，电，冰，暗，
        属性：暴击，必中，纯粹，必杀
            存粹伤害无视所有护甲，抗性
        接口调整:
            attack->        attack
            hit->           checkHit
            damageRoll->    giveDamage
            drRoll->        defendDamage    物理抵抗
            attackProc->    attackProc
            defenseProc->   defenseProc
            damage->        takeDamage
            immunities->    immunizedBuffs  免疫  
            resistances->   resistDamage    魔法、元素抵抗

            damageRoll->    giveDamage
            proc->          proc
    
    +女巫特质完成，轻微修改了萃取瓶附魔几率，现在也具有初始远程武器了。
    +影之灵龛可以通过特殊方式升级。
    +新物品：酒
    +战士新特质，饮酒获得更多回复，且不会醉酒。
    +全新压力系统：
        自信：+精准，+伤害，
        紧张：-精准，-闪避，-卷轴阅读，-未知药剂使用，
        崩溃：-精准，-闪避，-伤害，-血量，
        
        + 杀敌，打出暴击，进食，人性，升级，饮酒，
        - 自然，陷阱，被暴击，被偷袭，低血量被攻击，
    +新的房间：雕塑房

    ~perk机制改动
    ~敌法刻印给予魔法抗性，元素戒指给予元素抗性
    ~蝎子抗性为毒、暗，之前是吸血
    ~骷髅爆炸伤害为魔法-暗
    ~远程武器享受力量加成，女猎手获得额外加成
    ~背包再次扩容
    ~蓄血圣杯更名为血精之盅，血祭伤害下调，从常规掉落中移除。
    ~房间类型的几率平均

    主界面更改，移除了所有教程系的路标（由指南给出）。
    雕像不可摄魂
    大量代码重构

0.1.3
done:
    +灰心哥
    +杰西卡任务，书本
    +现在通关判定为从村庄层离开（携带护符可以从第1层返回第0层）
    +骷髅骑士：新的敌人已添加在监狱层，无闪避，只有反击，拥有连击机制

    ~制杖老人：女巫对话补全；
    ~棱光法杖：最大伤害提升1点，现在被棱光法杖击中的单位将被观察；
    ~女猎手：新的特质——视界和视野均提升1点，狙击手专注的目标将被观察；
    ~影之灵龛：现在施法需要消耗时间，现在亡灵单位被击杀时不会触发灵魂吸纳效果，修复了npc离开时的灵魂吸收bug，添加了技能说明，修正了摄魂术判定，被摄魂的单位将随着英雄带下楼；
    ~火把：点燃耗时降低；
    ~玫瑰：现在幽灵可以带下楼；
    ~英雄：强化回血1.15倍；
    
    -新职业导致的成就不正常
    -毒气穿墙
    -部分房间的光源放置
    -萃取瓶不可升级
    -生物视野修正
    -暂时隐藏压力值
    -棱光法杖光照时间的计算错误

0.1.2
done:
    标题贴图，
    女巫代表贴图，女巫贴图
    LIGHT_ON, LIGHT_OFF贴图区分
    村庄生成重写，启用装饰
    新的贱民：学者，杰西卡
    术士重做：现在使用灵魂释放法术-灵魂火，灵魂标记，摄魂术
    女巫调整：10点力量，萃取瓶可以失败，并将有几率附魔武器，更低的闪避，绯红女王削弱
    新物品：影之灵龛，术士独有
    新buff：灵魂燃烧

0.1.1
done:
    火把掉率大降，且随着地牢的深入，掉率将会更低。火把价格降低且商店必定出售火把；
    降低了村庄层的奖励；
    提高了火把视野，但降低了火把持续时间，现在火把在快熄灭时提供更短的视野；
    女巫特质：商店75折，对毒的抗性进一步提高；
    女巫贴图，手杖，萃取瓶，护甲包；
    显示饥饿
    魔女职业
    更新页面
    血量增强
    小偷削弱
    棱光法杖削弱

0.1.0:
总体而言降低了难度：
    降低了陷阱出现的几率；
    扩大了背包的容量，并且现在拥有三个饰品位；
    添加了一个简陋的村庄层，而不是直接出现在地牢的第一层；
    露水优先收集到露水瓶中，且回复量与最大生命值相关（女猎手获得加成）；
    新的职业女巫已添加，未完成；
    降低了单位视野，且受到新加入的场景光源影响，相应地，火把的掉率提升。照明将成为重要的冒险资源；
    增强了食物对饥饿的补充；
    添加了新物品药剂试纸；
